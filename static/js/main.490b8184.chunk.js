(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{47:function(e,t,a){e.exports=a(78)},52:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"fetchWeather",(function(){return V})),a.d(n,"fetchLinkedWeather",(function(){return z})),a.d(n,"updateLinkedCities",(function(){return Y})),a.d(n,"toggleManagementModal",(function(){return Z}));var r=a(0),c=a.n(r),i=a(23),l=a.n(i),o=(a(52),a(16)),u=a(4),s=a(13),m=a(19),d=a(6),E=(a(44),a(45)),p=a(5),h={weather:{},fetchRequestCount:0,linkedCities:["Wroclaw","Gdansk","Krakow"],linkedCitiesWeather:[],manegamentModalIsOpen:!1,isError:!1},f=Object(d.c)({weather:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_WEATHER_REQUEST":return Object(p.a)(Object(p.a)({},e),{},{linkedCitiesWeather:[],isError:!1,fetchRequestCount:e.fetchRequestCount+1});case"FETCH_WEATHER_SUCCESS":return Object(p.a)(Object(p.a)({},e),{},{weather:t.payload,fetchRequestCount:e.fetchRequestCount-1});case"FETCH_WEATHER_FAILURE":return Object(p.a)(Object(p.a)({},e),{},{fetchRequestCount:e.fetchRequestCount-1,isError:!0});case"FETCH_LINKED_WEATHER_REQUEST":return Object(p.a)(Object(p.a)({},e),{},{fetchRequestCount:e.fetchRequestCount+1});case"FETCH_LINKED_WEATHER_SUCCESS":return Object(p.a)(Object(p.a)({},e),{},{linkedCitiesWeather:[].concat(Object(m.a)(e.linkedCitiesWeather),[t.payload]),fetchRequestCount:e.fetchRequestCount-1});case"FETCH_LINKED_WEATHER_FAILURE":return Object(p.a)(Object(p.a)({},e),{},{fetchRequestCount:e.fetchRequestCount-1});case"UPDATE_LINKED_CITIES":return Object(p.a)(Object(p.a)({},e),{},{linkedCities:t.payload});case"TOGGLE_MANAGEMENT_MODAL":return Object(p.a)(Object(p.a)({},e),{},{manegamentModalIsOpen:!e.manegamentModalIsOpen});default:return e}}}),_=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||d.d,b=[E.a,!1].filter(Boolean),C=Object(d.e)(f,_(d.a.apply(void 0,Object(m.a)(b)))),y=a(12),v=a(3),N=function(){return c.a.createElement("div",{className:"home"},c.a.createElement("div",{className:"home__icon"},c.a.createElement(y.a,{icon:v.m})),c.a.createElement("div",{className:"home__title"},"find out the temperature and more..."))},O=a(14),w=a(17),g=a(18),j=a.n(g),k=function(e){var t=e.id,a=e.onChange,n=e.name,r=e.type,i=e.value,l=e.placeholder,o=e.autoComplete,u=e.className,s=j()("input",Object(w.a)({},u,u));return c.a.createElement(c.a.Fragment,null,c.a.createElement("input",{className:s,id:t,name:n,type:r,autoComplete:o,value:i,onChange:a,placeholder:l}))};k.defaultProps={type:"text",className:"",placeholder:"",autoComplete:"off"};var T=k,M=function(e){var t=e.children,a=e.className,n=e.onClick,r=e.disabled,i=e.type,l=e.btnType,o=e.icon,u=j()("btn btn__".concat(l),Object(w.a)({},a,a));return c.a.createElement("button",{className:u,type:i,disabled:r,onClick:n},o&&c.a.createElement("span",{className:"btn__icon"},c.a.createElement(y.a,{icon:o})),t)};M.defaultProps={className:"",disabled:!1,type:"button",btnType:"primary",icon:null,onClick:function(){}};var R=M,A=function(){var e=Object(r.useState)(""),t=Object(O.a)(e,2),a=t[0],n=t[1],i=Object(u.f)();return c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i.push("/".concat(a))},className:"form"},c.a.createElement(T,{className:"form__input",id:"search",name:"search",value:a,onChange:function(e){return n(e.target.value)},placeholder:"City..."}),c.a.createElement(R,{className:"form__button",btnType:"primary",type:"submit",icon:v.k},"Search")))},S=a(46),F=a.n(S),H=function(e){var t=e.city,a=e.country,n=e.unixDate;return c.a.createElement("div",{className:"card-header"},c.a.createElement("h2",{className:"card-header__title"},t,", ",a),c.a.createElement("p",{className:"card-header__subtitle"},F.a.unix(n).format("dddd, DD MMMM")))};H.defaultProps={city:null,country:null,unixDate:null};var I=H,W={"01d":v.m,"01n":v.i,"02d":v.g,"02n":v.d,"03d":v.c,"03n":v.c,"04d":v.c,"04n":v.c,"09d":v.f,"09n":v.f,"10d":v.h,"10n":v.e,"11d":v.b,"11n":v.b,"13d":v.l,"13n":v.l,"50d":v.a,"50n":v.a},D=function(e){var t=e.icon,a=e.temperature,n=e.description,r=e.wind,i=e.humidity;return c.a.createElement("section",{className:"content"},c.a.createElement("div",{className:"content__section"},c.a.createElement("span",{className:"content__icon"},c.a.createElement(y.a,{icon:W[t]})),c.a.createElement("div",null,c.a.createElement("p",{className:"content__temperature"},Math.floor(a)," \xb0"),c.a.createElement("p",{className:"content__description"},n),c.a.createElement("div",{className:"content__hr"}),c.a.createElement("p",{className:"content__wind"},"Wind: ",Math.floor(r)," m/s"),c.a.createElement("p",{className:"content__humidity"},"Humidity: ",Math.floor(i),"%"))))};D.defaultProps={description:"",icon:"01d",wind:null,humidity:null,temperature:null};var L=D,q=function(e){var t=e.wrapperClassName;return c.a.createElement("div",{className:t},c.a.createElement("div",{className:"spinner"}))};q.defaultProps={wrapperClassName:""};var U=q,x=function(){return c.a.createElement("div",{className:"not-found"},c.a.createElement(y.a,{icon:v.j}),c.a.createElement("h3",{className:"not-found__title"},"City not found..."))},P=function(e){var t=e.weather,a=e.isFetching,n=e.isError;return a?c.a.createElement(U,{wrapperClassName:"card"}):c.a.createElement(c.a.Fragment,null,n?c.a.createElement(x,null):c.a.createElement(c.a.Fragment,null,c.a.createElement(I,{city:t.city,country:t.country,unixDate:t.date}),c.a.createElement("section",{className:"card"},c.a.createElement(L,{icon:t.icon,wind:t.wind,humidity:t.humidity,temperature:t.temp,description:t.description}))))},K=function(e){var t=e.city,a=e.country,n=e.temperature,r=e.icon;return c.a.createElement("div",{className:"linked-card"},c.a.createElement("h4",{className:"linked-card__title"},t,", ",a),c.a.createElement("div",{className:"linked-card__section"},c.a.createElement("span",{className:"linked-card__icon"},c.a.createElement(y.a,{icon:W[r]})),c.a.createElement("p",{className:"linked-card__temperature"},Math.floor(n)," \xb0")))},G=a(22),Q=a.n(G),B=a(31),J=a(32),X=a.n(J),V=function(e){return function(){var t=Object(B.a)(Q.a.mark((function t(a){var n,r,c,i;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"FETCH_WEATHER_REQUEST"}),t.prev=1,t.next=4,X.a.get("".concat("https://api.openweathermap.org/data/2.5/weather/","?q=").concat(e,"&appid=").concat("7746300b2da39fe99e6f89add8f8f58e","&units=metric"));case 4:return n=t.sent,r=Object(O.a)(n.data.weather,1),c=r[0],i={id:n.data.id,city:n.data.name,country:n.data.sys.country,temp:n.data.main.temp,date:n.data.dt,wind:n.data.wind.speed,humidity:n.data.main.humidity,icon:c.icon,description:c.description},t.abrupt("return",a({type:"FETCH_WEATHER_SUCCESS",payload:i}));case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",a({type:"FETCH_WEATHER_FAILURE"}));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},z=function(e){return function(){var t=Object(B.a)(Q.a.mark((function t(a){var n,r,c,i;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"FETCH_LINKED_WEATHER_REQUEST"}),t.prev=1,t.next=4,X.a.get("".concat("https://api.openweathermap.org/data/2.5/weather/","?q=").concat(e,"&appid=").concat("7746300b2da39fe99e6f89add8f8f58e","&units=metric"));case 4:return n=t.sent,r=Object(O.a)(n.data.weather,1),c=r[0],i={id:n.data.id,city:n.data.name,country:n.data.sys.country,temp:n.data.main.temp,icon:c.icon,description:c.description},t.abrupt("return",a({type:"FETCH_LINKED_WEATHER_SUCCESS",payload:i}));case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",a({type:"FETCH_LINKED_WEATHER_FAILURE"}));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},Y=function(e){return{type:"UPDATE_LINKED_CITIES",payload:e}},Z=function(){return{type:"TOGGLE_MANAGEMENT_MODAL"}},$=function(e){var t=e.weather,a=e.isError,n=e.weatherActions,i=e.isFetching,l=e.linkedCities,o=e.linkedCitiesWeather,s=Object(u.g)().city;return Object(r.useEffect)((function(){Promise.all([n.fetchWeather(s)].concat(Object(m.a)(l.map((function(e){return n.fetchLinkedWeather(e)})))))}),[s]),c.a.createElement(c.a.Fragment,null,c.a.createElement(P,{weather:t,isFetching:i,isError:a}),o.map((function(e){return c.a.createElement(K,{key:e.id,icon:e.icon,city:e.city,country:e.country,temperature:e.temp})})))};$.defaultProps={isFetching:!1};var ee=Object(s.b)((function(e){return{weather:e.weather.weather,linkedCities:e.weather.linkedCities,linkedCitiesWeather:e.weather.linkedCitiesWeather,isFetching:e.weather.fetchRequestCount>0,isError:e.weather.isError}}),(function(e){return{weatherActions:Object(d.b)(n,e)}}))($),te=function(e){var t=e.handleManagementModal;return c.a.createElement("header",{className:"header"},c.a.createElement("nav",{className:"header__nav"},c.a.createElement("h1",null,c.a.createElement(o.b,{className:"header__title",to:"/"},"weather app")),c.a.createElement("a",{className:"header__button",role:"button",onClick:t,tabIndex:0},"Manage")))},ae=Object(s.b)(null,(function(e){return{weatherActions:Object(d.b)(n,e)}}))((function(e){var t=e.weatherActions;return c.a.createElement(te,{handleManagementModal:t.toggleManagementModal})})),ne=function(e){var t=e.show,a=e.onClick;return t?c.a.createElement("div",{className:"backdrop",onClick:a}):null};ne.defaultProps={show:!1,onClick:function(){}};var re=ne,ce=function(e){var t=e.linkedCities,a=e.show,n=e.onSubmit,i=e.onHide,l=Object(O.a)(t,3),o=l[0],u=l[1],s=l[2],m=Object(r.useReducer)((function(e,t){return Object(p.a)(Object(p.a)({},e),t)}),{first:o,second:u,third:s}),d=Object(O.a)(m,2),E=d[0],h=d[1],f=j()("modal",{"modal--is-open":a});return c.a.createElement(c.a.Fragment,null,c.a.createElement(re,{show:a,onClick:i}),c.a.createElement("div",{className:f},c.a.createElement("h4",{className:"modal__title"},"choose linked cities"),c.a.createElement("form",{onSubmit:function(e){return n(e,E)}},c.a.createElement(T,{className:"modal__input",onChange:function(e){return h({first:e.target.value})},id:"firstCity",name:"firstCity",value:E.first}),c.a.createElement(T,{className:"modal__input",onChange:function(e){return h({second:e.target.value})},id:"secondCity",name:"secondCity",value:E.second}),c.a.createElement(T,{className:"modal__input",onChange:function(e){return h({third:e.target.value})},id:"thirdCity",name:"thirdCity",value:E.third}),c.a.createElement("div",{className:"modal__buttons"},c.a.createElement(R,{btnType:"default",onClick:i},"Cancel"),c.a.createElement(R,{type:"submit",className:"modal__button--save"},"Save")))))};ce.defaultProps={show:!1};var ie=ce,le=function(e){var t=e.linkedCities,a=e.weatherActions,n=e.manegamentModalIsOpen;return c.a.createElement(ie,{onSubmit:function(e,t){e.preventDefault();var n=Object.values(t);a.updateLinkedCities(n),a.toggleManagementModal()},linkedCities:t,show:n,onHide:a.toggleManagementModal})};le.defaultProps={manegamentModalIsOpen:!1};var oe=Object(s.b)((function(e){return{manegamentModalIsOpen:e.weather.manegamentModalIsOpen,linkedCities:e.weather.linkedCities}}),(function(e){return{weatherActions:Object(d.b)(n,e)}}))(le),ue=function(){return c.a.createElement(s.a,{store:C},c.a.createElement(o.a,{basename:"/"},c.a.createElement(oe,null),c.a.createElement(ae,null),c.a.createElement(A,null),c.a.createElement(u.c,null,c.a.createElement(u.a,{exact:!0,path:"/",component:N}),c.a.createElement(u.a,{exact:!0,path:"/:city",component:ee}))))};l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(ue,null)),document.getElementById("weather-app"))}},[[47,1,2]]]);
//# sourceMappingURL=main.490b8184.chunk.js.map